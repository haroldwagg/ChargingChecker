<html>
<head>
  <link href="https://fonts.googleapis.com/css?family=Raleway:400,300,600,800,900" rel="stylesheet" type="text/css">
  <script src="progressbar.js"></script>
  <style>
    #container {
      margin: auto;
      width: 300px;
      height: 300px;
      position: relative;
      margin-top: 2em;
    }
    body {
      background-color: #303030;
    }
    #settingsDiv {
      position: absolute;
      bottom: 0;
      width: 100%;
      height: 90px;
      background-color: #ccc;
      padding-bottom: 15px;
    }
    #settingsP {
      text-align: center;
    }
  </style>

</head>
<body background-color="#333333">


<div id="container"></div>
<div id="chargingIndicatorDiv" style="text-align: center;">
  <img src="newChargingIcon.png" id="chargingIndicator" style="visibility: visible; width: 7em; margin-top: 20px;" />
</div>

<div id="settingsDiv">
  <p id="settingsP">
    Chime every &nbsp;&nbsp;<input style="width: 38%" type="range" min="0" max="30" value="12" step="2" class="slider" id="delayRange" oninput="displayDelayTime(this.value)" />&nbsp;&nbsp; <span id="delayMsg">4 mins</span>
    <br />
    <select id="manualChimes" onChange="manualDing(this)">
      <option selected disabled>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Hear the Chimes</option>
      <option value="fullcharge">Play FULL CHARGE Chime</option>
      <option value="upper">Play CHARGING Chime</option>
      <option value="downer">Play NOT CHARGING Chime</option>
      <option value="nochange">Play NO CHANGE Chime</option>
    </select>
    <br />
      Volume: &nbsp;&nbsp;<input type="range" min="0" max="1.0" value="0.6" step="0.1" class="slider" id="volumeRange" oninput="adjustVolume(this.value)" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="checkbox" id="speakCheck" onClick="doSpeakPercent()" /> Speak %
  </p>

</div>

<script>
  // progressbar.js@1.0.0 version is used
  // Docs: http://progressbarjs.readthedocs.org/en/1.0.0/

  var SIZE;
  var ORIENT;
  var ratio = window.devicePixelRatio || 1;

  var value;
  var bar;
  var batteryValue = 89;
  var myColors = [
  "#ff0000",
  "#ff0500",
  "#ff0a00",
  "#ff1000",
  "#ff1500",
  "#ff1a00",
  "#ff1f00",
  "#ff2400",
  "#ff2a00",
  "#ff2f00",
  "#ff3400",
  "#ff3900",
  "#ff3e00",
  "#ff4400",
  "#ff4900",
  "#ff4e00",
  "#ff5300",
  "#ff5800",
  "#ff5e00",
  "#ff6300",
  "#ff6800",
  "#ff6d00",
  "#ff7200",
  "#ff7800",
  "#ff7d00",
  "#ff8200",
  "#ff8700",
  "#ff8d00",
  "#ff9200",
  "#ff9700",
  "#ff9c00",
  "#ffa100",
  "#ffa700",
  "#ffac00",
  "#ffb100",
  "#ffb600",
  "#ffbb00",
  "#ffc100",
  "#ffc600",
  "#ffcb00",
  "#ffd000",
  "#ffd500",
  "#ffdb00",
  "#ffe000",
  "#ffe500",
  "#ffea00",
  "#ffef00",
  "#fff500",
  "#fffa00",
  "#ffff00",
  "#ffff00",
  "#faff00",
  "#f5ff00",
  "#efff00",
  "#eaff00",
  "#e5ff00",
  "#e0ff00",
  "#dbff00",
  "#d5ff00",
  "#d0ff00",
  "#cbff00",
  "#c6ff00",
  "#c1ff00",
  "#bbff00",
  "#b6ff00",
  "#b1ff00",
  "#acff00",
  "#a7ff00",
  "#a1ff00",
  "#9cff00",
  "#97ff00",
  "#92ff00",
  "#8dff00",
  "#87ff00",
  "#82ff00",
  "#7dff00",
  "#78ff00",
  "#72ff00",
  "#6dff00",
  "#68ff00",
  "#63ff00",
  "#5eff00",
  "#58ff00",
  "#53ff00",
  "#4eff00",
  "#49ff00",
  "#44ff00",
  "#3eff00",
  "#39ff00",
  "#34ff00",
  "#2fff00",
  "#2aff00",
  "#24ff00",
  "#1fff00",
  "#1aff00",
  "#15ff00",
  "#10ff00",
  "#0aff00",
  "#05ff00",
  "#00ff00",
  ];

  document.addEventListener("deviceready", starter, false);
  window.addEventListener("orientationchange", onOChange);

  function starter()   {
//        alert(fontSize);
//        alert(Math.round(screen.width / fontSize));
    getScreenSize();
    onOChange();
    setInterval(tick, 1000);
  }

  function getScreenSize()   {
    var ratio = window.devicePixelRatio || 1;
    if ((screen.height / ratio > 780) || (screen.width / ratio > 780))   {
      SIZE = "big";
    }
    else   {
      SIZE = "small";
    }
//        alert("SIZE is " + SIZE);
//        doScreenSpecs();
  }

  function doScreenSpecs()  {
    var oput = "ORIENTATION: " + ORIENT + "\rSCREEN WIDTH: " + screen.width;
    oput += "\rSCREEN HEIGHT: " + screen.height + "\rPIXEL RATIO: " + ratio;
    alert (oput);
  }

  function onOChange()   {
    ORIENT = (screen.height > screen.width) ? "portrait" : "landscape";

//    doScreenSpecs();

    getScreenSize();

    if (ORIENT == "landscape")   {
      var useableHeight = window.innerHeight - 105;
//      alert ("Height: " + useableHeight);
      var containerDim = Math.floor(useableHeight - 350);
      containerDim = Math.floor(containerDim / ratio);
      document.getElementById('container').style.marginTop = '.75em';

      if (SIZE == "small")   {
        document. getElementById('chargingIndicator').style.width = '4em';
        document. getElementById('chargingIndicator').style.marginTop = '10px';
      }

    }
    else   {  // portrait
//      var useableWidth = window.innerWidth;
//      alert ("Width: " + useableWidth);
      var useableWidth = screen.width;
      var containerDim = Math.floor(useableWidth);
      containerDim = Math.floor((containerDim / ratio) * 1.25);
      if (SIZE == "small")   {
        document. getElementById('chargingIndicator').style.width = '7em';
      }
      var tMargin = (screen.height - 270 - containerDim) / 2;

      var v = "document.getElementById('container').style.marginTop = '" + Math.floor(tMargin) + "px'";
      eval(v);
    }
      var s = "document.getElementById('container').style.width = '" + containerDim + "px'";
//      alert (s);
      eval(s)
      var t = "document.getElementById('container').style.height = '" + containerDim + "px'";
//      alert (t);
      eval(t);

  }



  bar = new ProgressBar.Circle(container, {
    color: '#eee',
    // This has to be the same size as the maximum width to
    // prevent clipping
    strokeWidth: 8,
    trailWidth: 3,
    // easing: 'easeInOut',
    easing: 'easeInOut',
    duration: 5400,
    text: {
      autoStyleContainer: false
    },
    from: { color: '#aaa', width: 3 },
    to: { color: '#333', width: 8 },
    // Set default step function for all animate calls
    step: function(state, circle) {
      value = Math.round(circle.value() * 100);

      circle.path.setAttribute('stroke', myColors[value]);
      circle.path.setAttribute('stroke-width', state.width);

       if (value === 0) {
        circle.setText('');
      } else {
        circle.setText(value + "%");
      }
    }
  });
  bar.text.style.fontFamily = '"Raleway", Helvetica, sans-serif';
  bar.text.style.fontSize = '4rem';
  bar.text.style.fontWeight = '600';
  bar.text.style.color = '#cccccc';

 bar.animate(batteryValue/100);  // Number from 0.0 to 1.0






</script>

<!--
<a href='https://pngtree.com/so/battery-icons'>battery-icons png from pngtree.com</a>
-->

</body>
</html>
